<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>宠物领养系统 - 登录/注册</title>
    <link rel="stylesheet" href="../css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css"
    />
    <style>
      /* Page specific styles */
      .auth-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: calc(100vh - 300px);
        padding: 40px 0;
      }

      .auth-box {
        background-color: var(--white);
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        width: 90%;
        max-width: 500px;
        padding: 40px;
        position: relative;
      }

      .auth-tabs {
        display: flex;
        margin-bottom: 30px;
      }

      .auth-tab {
        flex: 1;
        text-align: center;
        padding: 15px;
        cursor: pointer;
        border-bottom: 2px solid #eee;
        font-weight: 500;
        transition: all 0.3s;
      }

      .auth-tab.active {
        border-bottom-color: var(--primary-color);
        color: var(--primary-color);
      }

      .auth-form {
        display: none;
      }

      .auth-form.active {
        display: block;
      }

      .form-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .auth-separator {
        display: flex;
        align-items: center;
        text-align: center;
        margin: 20px 0;
        color: #666;
      }

      .auth-separator::before,
      .auth-separator::after {
        content: "";
        flex: 1;
        border-bottom: 1px solid #eee;
      }

      .auth-separator::before {
        margin-right: 10px;
      }

      .auth-separator::after {
        margin-left: 10px;
      }

      .social-auth {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 30px;
      }

      .social-btn {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        color: var(--white);
        cursor: pointer;
        transition: transform 0.3s, box-shadow 0.3s;
      }

      .social-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .wechat {
        background-color: #07c160;
      }

      .qq {
        background-color: #12b7f5;
      }

      .weibo {
        background-color: #e6162d;
      }

      .form-footer {
        text-align: center;
        margin-top: 30px;
        font-size: 14px;
        color: #666;
      }

      .form-footer a {
        color: var(--primary-color);
        text-decoration: none;
      }

      .form-footer a:hover {
        text-decoration: underline;
      }

      .verification-code {
        display: flex;
        gap: 10px;
      }

      .verification-code input {
        flex: 1;
      }

      .verification-code button {
        white-space: nowrap;
      }

      .password-field {
        position: relative;
      }

      .toggle-password {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        cursor: pointer;
        color: #666;
      }

      .required {
        color: #e74c3c;
      }

      .error-msg {
        display: none;
        color: #e74c3c;
        font-size: 14px;
        margin-top: 5px;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="container">
        <nav>
          <div class="logo">宠爱有家</div>
          <ul class="nav-links">
            <li><a href="../index.html">首页</a></li>
            <li><a href="pets.html">宠物领养</a></li>
            <li><a href="forum.html">社区论坛</a></li>
            <li><a href="consultation.html">在线问诊</a></li>
            <li><a href="about.html">关于我们</a></li>
            <li><a href="login.html" class="btn active">登录/注册</a></li>
          </ul>
          <div class="menu-toggle">
            <i class="bi bi-list"></i>
          </div>
        </nav>
      </div>
    </header>

    <!-- Main Content -->
    <main>
      <div class="auth-container">
        <div class="auth-box">
          <div class="auth-tabs">
            <div class="auth-tab active" data-target="login-form">登录</div>
            <div class="auth-tab" data-target="register-form">注册</div>
          </div>

          <!-- Login Form -->
          <form id="login-form" class="auth-form active">
            <div class="form-header">
              <h2>欢迎回来</h2>
              <p>登录您的账号，开始宠物领养之旅</p>
            </div>

            <div class="form-group">
              <label for="login-email"
                >邮箱/手机号 <span class="required">*</span></label
              >
              <input type="text" id="login-email" name="login_email" required />
              <div class="error-msg">请输入有效的邮箱或手机号</div>
            </div>

            <div class="form-group">
              <label for="login-password"
                >密码 <span class="required">*</span></label
              >
              <div class="password-field">
                <input
                  type="password"
                  id="login-password"
                  name="login_password"
                  required
                />
                <button type="button" class="toggle-password">
                  <i class="bi bi-eye"></i>
                </button>
              </div>
              <div class="error-msg">请输入密码</div>
            </div>

            <div class="form-group verification-code">
              <div>
                <label for="login-verification"
                  >验证码 <span class="required">*</span></label
                >
                <input
                  type="text"
                  id="login-verification"
                  name="login_verification"
                  required
                />
                <div class="error-msg">请输入验证码</div>
              </div>
              <div>
                <label>&nbsp;</label>
                <img
                  src="https://placehold.co/120x42/EEEEEE/666666?text=ABCD123"
                  alt="验证码"
                  height="42"
                />
              </div>
            </div>

            <div class="form-group">
              <label>
                <input type="checkbox" name="remember_me" /> 记住我
              </label>
              <a href="forgot-password.html" class="float-right">忘记密码？</a>
            </div>

            <button type="submit" class="btn btn-block">登录</button>

            <div class="auth-separator">或通过以下方式登录</div>

            <div class="social-auth">
              <div class="social-btn wechat">
                <i class="bi bi-wechat"></i>
              </div>
              <div class="social-btn qq">
                <i class="bi bi-chat-fill"></i>
              </div>
              <div class="social-btn weibo">
                <i class="bi bi-sina-weibo"></i>
              </div>
            </div>

            <div class="form-footer">
              还没有账号？<a
                href="#"
                class="switch-auth"
                data-target="register-form"
                >立即注册</a
              >
            </div>
          </form>

          <!-- Register Form -->
          <form id="register-form" class="auth-form">
            <div class="form-header">
              <h2>创建账号</h2>
              <p>加入我们，开始您的宠物领养之旅</p>
            </div>

            <div class="form-group">
              <label for="register-email"
                >邮箱 <span class="required">*</span></label
              >
              <input
                type="email"
                id="register-email"
                name="register_email"
                required
              />
              <div class="error-msg">请输入有效的邮箱地址</div>
            </div>

            <div class="form-group verification-code">
              <div>
                <label for="email-verification"
                  >邮箱验证码 <span class="required">*</span></label
                >
                <input
                  type="text"
                  id="email-verification"
                  name="email_verification"
                  required
                />
                <div class="error-msg">请输入验证码</div>
              </div>
              <div>
                <label>&nbsp;</label>
                <button type="button" class="btn btn-secondary">
                  获取验证码
                </button>
              </div>
            </div>

            <div class="form-group">
              <label for="register-password"
                >设置密码 <span class="required">*</span></label
              >
              <div class="password-field">
                <input
                  type="password"
                  id="register-password"
                  name="register_password"
                  required
                />
                <button type="button" class="toggle-password">
                  <i class="bi bi-eye"></i>
                </button>
              </div>
              <div class="error-msg">
                密码长度需在8-20个字符之间，包含字母和数字
              </div>
            </div>

            <div class="form-group">
              <label for="confirm-password"
                >确认密码 <span class="required">*</span></label
              >
              <div class="password-field">
                <input
                  type="password"
                  id="confirm-password"
                  name="confirm_password"
                  required
                />
                <button type="button" class="toggle-password">
                  <i class="bi bi-eye"></i>
                </button>
              </div>
              <div class="error-msg">两次输入的密码不一致</div>
            </div>

            <div class="form-group">
              <label>
                <input type="checkbox" name="agree_terms" required />
                我已阅读并同意<a href="#">《用户协议》</a>和<a href="#"
                  >《隐私政策》</a
                >
              </label>
              <div class="error-msg">您必须同意用户协议和隐私政策</div>
            </div>

            <button type="submit" class="btn btn-block">注册</button>

            <div class="auth-separator">或通过以下方式注册</div>

            <div class="social-auth">
              <div class="social-btn wechat">
                <i class="bi bi-wechat"></i>
              </div>
              <div class="social-btn qq">
                <i class="bi bi-chat-fill"></i>
              </div>
              <div class="social-btn weibo">
                <i class="bi bi-sina-weibo"></i>
              </div>
            </div>

            <div class="form-footer">
              已有账号？<a href="#" class="switch-auth" data-target="login-form"
                >立即登录</a
              >
            </div>
          </form>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="footer-links">
          <div class="footer-section">
            <h3>关于我们</h3>
            <ul>
              <li><a href="about.html">平台介绍</a></li>
              <li><a href="about.html#team">团队成员</a></li>
              <li><a href="about.html#contact">联系我们</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h3>服务与支持</h3>
            <ul>
              <li><a href="faq.html">常见问题</a></li>
              <li><a href="terms.html">用户协议</a></li>
              <li><a href="privacy.html">隐私政策</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h3>联系方式</h3>
            <ul>
              <li><i class="bi bi-envelope"></i> contact@petadoption.com</li>
              <li><i class="bi bi-telephone"></i> 400-888-8888</li>
              <li><i class="bi bi-geo-alt"></i> 北京市海淀区XX路XX号</li>
            </ul>
          </div>
        </div>

        <div class="footer-bottom">
          <p>&copy; 2023 宠爱有家 - 宠物领养平台 版权所有</p>
        </div>
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Tab switching functionality
        const authTabs = document.querySelectorAll(".auth-tab");
        const authForms = document.querySelectorAll(".auth-form");
        const switchLinks = document.querySelectorAll(".switch-auth");

        function switchTab(targetId) {
          // Hide all forms and deactivate all tabs
          authForms.forEach((form) => form.classList.remove("active"));
          authTabs.forEach((tab) => tab.classList.remove("active"));

          // Show target form and activate target tab
          document.getElementById(targetId).classList.add("active");
          document
            .querySelector(`[data-target="${targetId}"]`)
            .classList.add("active");
        }

        authTabs.forEach((tab) => {
          tab.addEventListener("click", function () {
            const targetId = this.getAttribute("data-target");
            switchTab(targetId);
          });
        });

        switchLinks.forEach((link) => {
          link.addEventListener("click", function (e) {
            e.preventDefault();
            const targetId = this.getAttribute("data-target");
            switchTab(targetId);
          });
        });

        // Toggle password visibility
        const togglePasswordButtons =
          document.querySelectorAll(".toggle-password");
        togglePasswordButtons.forEach((button) => {
          button.addEventListener("click", function () {
            const passwordField = this.previousElementSibling;
            const icon = this.querySelector("i");

            if (passwordField.type === "password") {
              passwordField.type = "text";
              icon.classList.remove("bi-eye");
              icon.classList.add("bi-eye-slash");
            } else {
              passwordField.type = "password";
              icon.classList.remove("bi-eye-slash");
              icon.classList.add("bi-eye");
            }
          });
        });

        // Form validation
        const loginForm = document.getElementById("login-form");
        const registerForm = document.getElementById("register-form");

        loginForm.addEventListener("submit", function (e) {
          e.preventDefault();
          if (validateLoginForm()) {
            alert("登录成功！即将跳转到首页...");
            // Simulate redirect after login
            setTimeout(() => {
              window.location.href = "../index.html";
            }, 1500);
          }
        });

        registerForm.addEventListener("submit", function (e) {
          e.preventDefault();
          if (validateRegisterForm()) {
            alert("注册成功！请查收激活邮件并登录。");
            switchTab("login-form");
          }
        });

        function validateLoginForm() {
          let isValid = true;
          const email = document.getElementById("login-email");
          const password = document.getElementById("login-password");
          const verification = document.getElementById("login-verification");

          // Simple validation
          if (!email.value.trim()) {
            showError(email, true);
            isValid = false;
          } else {
            showError(email, false);
          }

          if (!password.value.trim()) {
            showError(password, true);
            isValid = false;
          } else {
            showError(password, false);
          }

          if (!verification.value.trim()) {
            showError(verification, true);
            isValid = false;
          } else {
            showError(verification, false);
          }

          return isValid;
        }

        function validateRegisterForm() {
          let isValid = true;
          const email = document.getElementById("register-email");
          const emailVerification =
            document.getElementById("email-verification");
          const password = document.getElementById("register-password");
          const confirmPassword = document.getElementById("confirm-password");
          const agreeTerms = document.querySelector(
            'input[name="agree_terms"]'
          );

          // Email validation
          const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!email.value.trim() || !emailPattern.test(email.value)) {
            showError(email, true);
            isValid = false;
          } else {
            showError(email, false);
          }

          // Verification code
          if (!emailVerification.value.trim()) {
            showError(emailVerification, true);
            isValid = false;
          } else {
            showError(emailVerification, false);
          }

          // Password validation
          const passwordPattern = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,20}$/;
          if (!password.value.trim() || !passwordPattern.test(password.value)) {
            showError(password, true);
            isValid = false;
          } else {
            showError(password, false);
          }

          // Confirm password
          if (password.value !== confirmPassword.value) {
            showError(confirmPassword, true);
            isValid = false;
          } else {
            showError(confirmPassword, false);
          }

          // Terms agreement
          if (!agreeTerms.checked) {
            showError(agreeTerms, true);
            isValid = false;
          } else {
            showError(agreeTerms, false);
          }

          return isValid;
        }

        function showError(element, show) {
          const errorMsg =
            element.parentElement.querySelector(".error-msg") ||
            element.parentElement.parentElement.querySelector(".error-msg");
          if (errorMsg) {
            errorMsg.style.display = show ? "block" : "none";
          }

          if (element.type === "checkbox") {
            // For checkbox
            element.parentElement.style.color = show ? "#E74C3C" : "";
          } else {
            // For text inputs
            element.style.borderColor = show ? "#E74C3C" : "";
          }
        }
      });
    </script>
  </body>
</html>
